# C++常见操作系统相关的宏定义整理

大多数C++编译器都有操作系统相关的宏定义。此处有 **[操作系统宏定义](https://sourceforge.net/p/predef/wiki/OperatingSystems/)**的几乎完整列表可供参考。

下面列举出几种常见的操作系统相关的宏定义：

## Windows

```c++
_WIN32  //32位 and 64位系统都适用
_WIN64  //仅64位windows
```

## Unix (Linux, *BSD, 注意Mac OS中未定义)

```c++
unix
__unix
__unix__
```

## Mac OS

```c++
//下面两种宏在Mac OS中都定义了，都可以使用
__APPLE__  // 也适用于早期的mac系统
__MACH__
```

## Linux

```c++
__linux__
linux  //后面这两种逐渐被废弃，非posix兼容
__linux Obsolete 
```

## Android

```c++
__ANDROID__
```



## 系统宏定义实例

下面是stackoverflow上找到的系统宏定义使用的例子，比较典型：

```cpp
#if defined(WIN32) || defined(_WIN32) || defined(__WIN32__) || defined(__NT__)
   // 32位或64位windows
   #ifdef _WIN64
      //只是64位Windows
   #else
      //32位windows
   #endif
#elif __APPLE__
    #include <TargetConditionals.h>
    #if TARGET_IPHONE_SIMULATOR
         // iOS, tvOS, or watchOS Simulator
    #elif TARGET_OS_MACCATALYST
         // Mac's Catalyst (ports iOS API into Mac, like UIKit).
    #elif TARGET_OS_IPHONE
        // iOS, tvOS, or watchOS device
    #elif TARGET_OS_MAC
        // Other kinds of Apple platforms
    #else
    #   error "未知苹果系统"
    #endif
#elif __ANDROID__
    // __linux__虽然也可以在android上使用
    // 但不能唯一标示出Android.
#elif __linux__
    // linux
#elif __unix__
    // Unix
#elif defined(_POSIX_VERSION)
    // POSIX
#else
#   error "未知编译器"
#endif
```

>参考1：https://stackoverflow.com/questions/5919996/how-to-detect-reliably-mac-os-x-ios-linux-windows-in-c-preprocessor
>
>参考2：https://stackoverflow.com/questions/142508/how-do-i-check-os-with-a-preprocessor-directive

